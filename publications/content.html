<div class="container-fluid">

    <div>Publications (<span id="start-year-title"></span> ~ <span id="end-year-title"></span>)</div>

    <div id="legend" class="text-muted my-2">
        <div id="legend-header" class="mb-1">Notes/Symbols Legend</div>
        <div class="mb-1">
            * Authors contributed equally to the article
        </div>
        <div>
            <b>Impact Factors:</b> 2021 Journal Citation Reports (<a href="https://clarivate.com/" target="_blank">Clarivate Analytics</a>, June 2022)
        </div>
        <div>
        </div>
    </div>

    <div id="publication-list">

    </div>
</div>


<script>
    urlParams = new URLSearchParams(window.location.search)
    startYear = urlParams.get('startyear') || 2016
    endYear = urlParams.get('endyear') || 2023
    order = urlParams.get('order')
    format = urlParams.get('format')

    $(function() {

        
        // Set years
        if (startYear !== undefined)
            $('#start-year-title').text(startYear)
        if (endYear !== undefined)
            $('#end-year-title').text(endYear)


        // Get Data from json and render
        $.getJSON('publications.json', function(data) {
            const years = [...new Set(data.map(e => e.year))]

        const yearPublications = {}

        years.forEach(year => yearPublications[year] = data.filter(e => e.year === year))


        for (const [key, value] of Object.entries(yearPublications)) {
            // Add year title
            $('#publication-list')
                .append(`
                    <div class="year">
                        ${key} <span class="article_count">(${value.length} articles)</span>
                        <a class="bookmark smooth-scroll" href="#top">Top â‡ª</a>
                    
                    </div>
                `)

            // Add articles title
            $('#publication-list')
            .append(`
            <div class="year-articles">
                <ul id="year-articles-list-${key}">
                    
                </ul>
                
            </div>
                `)

            // Add artiles
                    
            for (const article of value) {
                $(`#year-articles-list-${key}`)
                .append(`
                <li>
                    <div id="${article.id}" class="article">
                        <span class="authors">${article.authors}</span> 
                        <span class="year">(${article.year})</span> 
                        <span class="title font-bold">${article.title}</span>. 
                        <span class="journal font-bold" full-name="${article.journal.title}"><a href="${'article.journal.link'}" target="_blank">${article.journal.title}</a></span>.
                        </div>
                </li>
                `)
            }

            
        }
        })

        
    })
</script>